{% extends "layout.html" %}

{% block title %}
    {% if error %}
        {{error}}
    {% else %}
        data.username
    {% endif %}
{% endblock title %}

{% block content %}
    {% if error %}
        <div class="alert">
            {{error}}
        </div>
    {% else %}
        <section class="section hero">
            <h2>{{ data.username }}'s Profile</h2>
            <p>{{ data.first_name }} {{ data.last_name }}</p>
        </section>
        
        <section class="section blue-section">
            <img src="{{ data.profile_image.url }}" alt="Profile Image" class="profile-image">
            {% if user.is_authenticated %}
                <a href='{% url "accounts:logout" %}' class="block">logout</a>
                <a href='{% url "accounts:update" %}' class="block">update</a>
                <a href='{% url "accounts:delete" %}' class="block">delete</a>
            {% endif %}
        </section>
        
        <section class="section hero">
            <h2>Blog Posts</h2>
            <p>Explore articles written by {{ data.username }} on various topics. Dive into their thoughts, stories, and insights.</p>
        </section>

        <section class="section">
            {% for blog in data.blogs.all %}
                <div class="blog-card">
                    <h3>{{ blog.title }}</h3>
                    <p>{{ blog.content|truncatewords:30 }}</p>
                    <a href="{{ blog.get_absolute_url }}">Read more</a>
                </div>
            {% empty %}
                <p class="no-blogs">No blogs published yet.</p>
            {% endfor %}
        </section>
    {% endif %}
{% endblock content %}