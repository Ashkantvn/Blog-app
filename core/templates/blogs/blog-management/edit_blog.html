{% extends "layout.html" %}
{% load static %}

{% block link %}
  <link rel="stylesheet" href="{% static 'css/blogs.css' %}" />
{% endblock link %}

{% block title %}
  Edit Blog - {{ data.title }}
{% endblock title %}

{% block content %}
<section class="hero">
    <h2>Edit Your Blog</h2>
    <p>Update your story, refine your ideas, and keep your readers engaged.</p>
</section>

<section class="section blue-section">
    <h2>Edit Blog: {{ data.title }}</h2>

    <form method="post" enctype="multipart/form-data">
      {% if error %}
        <div class="alert">
            {{ error }}
        </div>
      {% elif message %}
        <div class="success">
            {{ message }}
        </div>
      {% endif %}
      {% csrf_token %}

      <label for="title">Title:</label>
      <input type="text" name="title" id="title" value="{{ data.title }}" required />

      <label for="content">Content:</label>
      <textarea name="content" id="content" rows="8" required>{{ data.content }}</textarea>

      <label for="banner">Banner Image:</label>
      {% if data.banner %}
        <div class="current-banner">
          <img src="{{ data.banner.url }}" alt="Current Banner" style="max-width: 100%; margin-bottom: 1rem;" />
        </div>
      {% endif %}
      <input type="file" name="banner" id="banner" accept="image/*" />

      <label for="tags">Tags (comma-separated):</label>
      <input type="text" name="tags" id="tags" value="{% for tag in data.tags.all %}{{ tag.tag_name }}{% if not forloop.last %}, {% endif %}{% endfor %}" />

      <label for="published_date">Publish Date:</label>
      <input type="date" name="published_date" id="published_date" value="{{ data.published_date|date:'Y-m-d' }}" />

      <label>
        Publish
        <input type="checkbox" name="is_published" {% if data.is_published %}checked{% endif %} />
      </label>

      <button type="submit" class="submit_button">Update Blog</button>
    </form>
</section>
{% endblock content %}
